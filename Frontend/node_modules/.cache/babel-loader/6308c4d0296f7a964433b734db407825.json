{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Mads T.F. Knudsen/Documents/GitHub/3.Sem-Kode-Eksame/Frontend/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/Mads T.F. Knudsen/Documents/GitHub/3.Sem-Kode-Eksame/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/Mads T.F. Knudsen/Documents/GitHub/3.Sem-Kode-Eksame/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from\"react\";var urlAPI=\"http://localhost:8080/Backend_war_exploded/api/\";var urlAuctions=urlAPI+\"Auction\";var application_json=function application_json(){var ops={headers:{'Content-Type':'application/json','Accept':'application/json'}};return ops;};function handleHttpErrors(response){if(!response.ok){return Promise.reject({status:response.status,fullError:response.json()});}return response.json();}function BackendAPI(){var GetAllAuctions=function GetAllAuctions(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),json=_useState2[0],setJson=_useState2[1];var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,json;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(urlAuctions,application_json);case 2:response=_context.sent;_context.next=5;return response.json();case 5:json=_context.sent;setJson(json);case 7:case\"end\":return _context.stop();}}},_callee);}));return function getData(){return _ref.apply(this,arguments);};}();useEffect(function(){getData();},[]);return json;};var AddAuction=function AddAuction(name,location,time,date){var options=makeOptions(\"POST\",true,{name:name,location:location,time:time,date:date});fetch(urlAPI+\"Auction/Add\",options).then(handleHttpErrors);};var RemoveAuction=function RemoveAuction(id){var options=makeOptions(\"POST\",true,{id:id});fetch(urlAPI+\"Auction/Remove\",options).then(handleHttpErrors);};var AddBoat=function AddBoat(name,brand,make,year,url){var options=makeOptions(\"POST\",true,{name:name,brand:brand,make:make,year:year,url:url});fetch(urlAPI+\"Boat/Add\",options).then(handleHttpErrors);};var UpdateBoat=function UpdateBoat(id,name,brand,make,year,url){var options=makeOptions(\"PUT\",true,{id:id,name:name,brand:brand,make:make,year:year,url:url});fetch(urlAPI+\"Boat/Update\",options).then(handleHttpErrors);};var UpdateOwner=function UpdateOwner(boat,owner){var options=makeOptions(\"PUT\",true,{boat:boat,owner:owner});fetch(urlAPI+\"Boat/UpdateOwner\",options).then(handleHttpErrors);};var login=function login(user,password){var options=makeOptions(\"POST\",true,{username:user,password:password});return fetch(urlAPI+\"login\",options).then(handleHttpErrors).then(function(response){setToken(response.token);return{username:response[\"username\"],role:response[\"role\"]};});};var register=function register(user,password){var options=makeOptions(\"POST\",true,{username:user,password:password});return fetch(urlAPI+\"login/New\",options).then(handleHttpErrors);};var makeOptions=function makeOptions(method,addToken,body){var opts={method:method,headers:{\"Content-type\":\"application/json\",'Accept':'application/json'}};if(addToken&&loggedIn()){opts.headers[\"x-access-token\"]=getToken();}if(body){opts.body=JSON.stringify(body);}return opts;};var setToken=function setToken(token){localStorage.setItem('jwtToken',token);};var getToken=function getToken(){return localStorage.getItem('jwtToken');};var loggedIn=function loggedIn(){var loggedIn=getToken()!=null;return loggedIn;};var logout=function logout(){localStorage.removeItem('jwtToken');};return{GetAllAuctions:GetAllAuctions,AddAuction:AddAuction,RemoveAuction:RemoveAuction,AddBoat:AddBoat,UpdateBoat:UpdateBoat,UpdateOwner:UpdateOwner,makeOptions:makeOptions,setToken:setToken,getToken:getToken,loggedIn:loggedIn,login:login,register:register,logout:logout};}var facade=BackendAPI();export default facade;","map":{"version":3,"sources":["C:/Users/Mads T.F. Knudsen/Documents/GitHub/3.Sem-Kode-Eksame/Frontend/src/API/BackendAPI.jsx"],"names":["useState","useEffect","urlAPI","urlAuctions","application_json","ops","headers","handleHttpErrors","response","ok","Promise","reject","status","fullError","json","BackendAPI","GetAllAuctions","setJson","getData","fetch","AddAuction","name","location","time","date","options","makeOptions","then","RemoveAuction","id","AddBoat","brand","make","year","url","UpdateBoat","UpdateOwner","boat","owner","login","user","password","username","setToken","token","role","register","method","addToken","body","opts","loggedIn","getToken","JSON","stringify","localStorage","setItem","getItem","logout","removeItem","facade"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\r\n\r\nconst urlAPI = \"http://localhost:8080/Backend_war_exploded/api/\";\r\nconst urlAuctions = urlAPI + \"Auction\";\r\n\r\nconst application_json = () => {\r\n    var ops = {\r\n        headers: { \r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json',\r\n        }\r\n    }\r\n    return ops;\r\n\r\n}\r\n\r\nfunction handleHttpErrors(response) {\r\n    if (!response.ok) {\r\n        return Promise.reject({ status: response.status, fullError: response.json() })\r\n    }\r\n    return response.json();\r\n}\r\n\r\nfunction BackendAPI(){\r\n    const GetAllAuctions = () =>{\r\n        const [json, setJson] = useState([]);\r\n        const getData = async () => {\r\n            const response = await fetch(urlAuctions, application_json);\r\n            const json = await response.json();\r\n            setJson(json);\r\n        }\r\n        \r\n        useEffect(() => {\r\n            getData()\r\n        }, [])\r\n\r\n        return json;\r\n    }\r\n\r\n    const AddAuction = (name, location, time, date) => {\r\n        const options = makeOptions(\"POST\", true, { name: name, location: location, time: time, date: date});\r\n        fetch(urlAPI+\"Auction/Add\", options)\r\n        .then(handleHttpErrors)\r\n    }\r\n\r\n    const RemoveAuction = (id) =>{\r\n        const options = makeOptions(\"POST\", true, { id: id});\r\n        fetch(urlAPI+\"Auction/Remove\", options)\r\n        .then(handleHttpErrors)\r\n    }\r\n\r\n    const AddBoat = (name, brand, make, year, url) => {\r\n        const options = makeOptions(\"POST\", true, { name: name, brand:brand, make:make, year:year, url: url});\r\n        fetch(urlAPI+\"Boat/Add\", options)\r\n        .then(handleHttpErrors)\r\n    }\r\n\r\n    const UpdateBoat = (id, name, brand, make, year, url) => {\r\n        const options = makeOptions(\"PUT\", true, {id:id, name: name, brand:brand, make:make, year:year, url: url});\r\n        fetch(urlAPI+\"Boat/Update\", options)\r\n        .then(handleHttpErrors)\r\n    }\r\n\r\n    const UpdateOwner = (boat, owner) => {\r\n        const options = makeOptions(\"PUT\", true, {boat: boat, owner: owner});\r\n        fetch(urlAPI+\"Boat/UpdateOwner\", options)\r\n        .then(handleHttpErrors)\r\n    }\r\n    \r\n    const login = (user, password) => {\r\n        const options = makeOptions(\"POST\", true, { username: user, password: password });\r\n        return fetch(urlAPI + \"login\", options)\r\n            .then(handleHttpErrors)\r\n            .then(response => { setToken(response.token);\r\n            return {\r\n                username: response[\"username\"],\r\n                role: response[\"role\"] \r\n            }})\r\n    };\r\n    const register = (user, password) => {\r\n        const options = makeOptions(\"POST\", true, { username: user, password: password });\r\n        return fetch(urlAPI + \"login/New\", options)\r\n            .then(handleHttpErrors)\r\n    }\r\n    const makeOptions = (method, addToken, body) => {\r\n        var opts = {\r\n            method: method,\r\n            headers: {\r\n                \"Content-type\": \"application/json\",\r\n                'Accept': 'application/json',\r\n            }\r\n        }\r\n        if (addToken && loggedIn()) {\r\n            opts.headers[\"x-access-token\"] = getToken();\r\n        }\r\n        if (body) {\r\n            opts.body = JSON.stringify(body);\r\n        }\r\n        return opts;\r\n    }\r\n    const setToken = (token) => {\r\n        localStorage.setItem('jwtToken', token);\r\n    }\r\n    const getToken = () => {\r\n        return localStorage.getItem('jwtToken');\r\n    }\r\n    const loggedIn = () => {\r\n        const loggedIn = getToken() != null;\r\n        return loggedIn;\r\n    }\r\n    const logout = () => {\r\n        localStorage.removeItem('jwtToken');\r\n    }\r\n    return {\r\n        GetAllAuctions,\r\n        AddAuction,\r\n        RemoveAuction,\r\n        AddBoat,\r\n        UpdateBoat,\r\n        UpdateOwner,\r\n        makeOptions,\r\n        setToken,\r\n        getToken,\r\n        loggedIn,\r\n        login,\r\n        register,\r\n        logout\r\n    }\r\n}\r\nconst facade = BackendAPI();\r\nexport default facade;"]},"metadata":{},"sourceType":"module"}